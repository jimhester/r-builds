version: '2.0'

services:
  ubuntu-1604:
    image: ubuntu:xenial
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=ubuntu-1604
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  ubuntu-1804:
    image: ubuntu:bionic
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=ubuntu-1804
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  debian-9:
    image: debian:stretch
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=debian-9
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  centos-6:
    image: centos:centos6
    command: /test/test-centos.sh
    environment:
      - OS_IDENTIFIER=centos-6
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  centos-7:
    image: centos:centos7
    command: /test/test-centos.sh
    environment:
      - OS_IDENTIFIER=centos-7
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  centos-8:
    image: centos:centos8
    command: /test/test-centos.sh
    environment:
      - OS_IDENTIFIER=centos-8
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  opensuse-42:
    image: opensuse/leap:42.3
    command: /test/test-opensuse.sh
    environment:
      - OS_IDENTIFIER=opensuse-42
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  opensuse-15:
    image: opensuse/leap:15.0
    command: /test/test-opensuse.sh
    environment:
      - OS_IDENTIFIER=opensuse-15
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
